const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/plotly-BOaK3Bcg.js","assets/index-DRj-Per4.js","assets/index-BRcAjvbj.css"])))=>i.map(i=>d[i]);
import{W as m,_ as f}from"./index-DRj-Per4.js";var y=function(h,e,i,n){function p(o){return o instanceof i?o:new i(function(r){r(o)})}return new(i||(i=Promise))(function(o,r){function d(a){try{l(n.next(a))}catch(u){r(u)}}function s(a){try{l(n.throw(a))}catch(u){r(u)}}function l(a){a.done?o(a.value):p(a.value).then(d,s)}l((n=n.apply(h,e||[])).next())})};const g="jp-RenderedPlotly",_="jp-MaterialIcon jp-PlotlyIcon",c="application/vnd.plotly.v1+json";class t extends m{constructor(e){super(),this.addClass(g),this._mimeType=e.mimeType,this._img_el=document.createElement("img"),this._img_el.className="plot-img",this.node.appendChild(this._img_el),this._img_el.addEventListener("mouseenter",i=>{this.createGraph(this._model)})}renderModel(e){if(this.hasGraphElement())return Promise.resolve();this._model=e;const i=e.data["image/png"];return i!=null?(this.updateImage(i),Promise.resolve()):this.createGraph(e)}hasGraphElement(){return this.node.querySelector(".plot-container")!==null}updateImage(e){this.hideGraph(),this._img_el.src="data:image/png;base64,"+e,this.showImage()}hideGraph(){let e=this.node.querySelector(".plot-container");e!=null&&(e.style.display="none")}showGraph(){let e=this.node.querySelector(".plot-container");e!=null&&(e.style.display="block")}hideImage(){let e=this.node.querySelector(".plot-img");e!=null&&(e.style.display="none")}showImage(){let e=this.node.querySelector(".plot-img");e!=null&&(e.style.display="block")}createGraph(e){const{data:i,layout:n,frames:p,config:o}=e.data[this._mimeType];return n.height||(n.height=360),y(this,void 0,void 0,function*(){return t.Plotly===null&&(t.Plotly=yield f(()=>import("./plotly-BOaK3Bcg.js").then(d=>d.p),__vite__mapDeps([0,1,2])),t.Plotly=t.Plotly.default,t._resolveLoadingPlotly()),t.loadingPlotly}).then(()=>t.Plotly.react(this.node,i,n,o)).then(d=>{this.showGraph(),this.hideImage(),this.update(),p&&t.Plotly.addFrames(this.node,p),this.node.offsetWidth>0&&this.node.offsetHeight>0&&t.Plotly.toImage(d,{format:"png",width:this.node.offsetWidth,height:this.node.offsetHeight}).then(s=>{const l=s.split(",")[1];e.data["image/png"]!==l&&e.setData({data:Object.assign(Object.assign({},e.data),{"image/png":l})})}),this.node.on("plotly_webglcontextlost",()=>{const s=e.data["image/png"];if(s!=null)return this.updateImage(s),Promise.resolve()})})}onAfterShow(e){this.update()}onResize(e){this.update()}onUpdateRequest(e){t.Plotly&&this.isVisible&&this.hasGraphElement()&&t.Plotly.redraw(this.node).then(()=>{t.Plotly.Plots.resize(this.node)})}}t.Plotly=null;t.loadingPlotly=new Promise(h=>{t._resolveLoadingPlotly=h});const w={safe:!0,mimeTypes:[c],createRenderer:h=>new t(h)},v=[{id:"@jupyterlab/plotly-extension:factory",rendererFactory:w,rank:0,dataType:"json",fileTypes:[{name:"plotly",mimeTypes:[c],extensions:[".plotly",".plotly.json"],iconClass:_}],documentWidgetFactoryOptions:{name:"Plotly",primaryFileType:"plotly",fileTypes:["plotly","json"],defaultFor:["plotly"]}}];export{c as MIME_TYPE,t as RenderedPlotly,v as default,w as rendererFactory};
